<!DOCTYPE html>
<html lang="en">

<head>
	<title>4Kingdoms | ScoreBoard</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/png" href="images/icons/logo-1.png" />

	<script src="https://www.gstatic.com/firebasejs/10.7.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.2/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.2/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<body style="background-image: url('images/bg/bg_login.png');">
<div class="container mt-3">
	<table class="table table-dark">
		<thead>
			<th>Player Name</th>
			<th>Winrate</th>
			<th>Total Win</th>
		</thead>
		<tbody id="tbody1"></tbody>
	</table>
</div>

	<script>
		function AddItemToTable(name, winrate, totalwin){
			let trow = document.createElement("tr");
			let td1 = document.createElement("td");
			let td2 = document.createElement("td");
			let td3 = document.createElement("td");

			td1.innerHTML = name;
			td2.innerHTML = winrate;
			td3.innerHTML = ++totalwin;

			trow.appendChild(td1);
			trow.appendChild(td2);
			trow.appendChild(td3);

			tbody.appendChild(trow);
		}

		function AddAllItemsToTable(player){
			totalwin = 0;
			tbody.innerHTML= "";
			player.forEach(element => {
				AddItemToTable(element.name, element.winrate, element.totalwin);
			});

		}

		function GatAllDataOnce(){
			const dbRef = ref(db);

			get(child(dbRef, "PlayerList"))
			.then((snapshot)=>{
				var player = [];

				snapshot.forEach(childSnapshot => {
					player.push(childSnapshot.val());
				});

				AddAllItemsToTable(players);
			});
		}

		window.onload = GatAllDataOnce;
	</script>
	<script>
		// For Firebase JS SDK v7.20.0 and later, measurementId is optional
		const firebaseConfig = {
		apiKey: "AIzaSyCwwfH1xJ3T7rsvvDHN-4-c7irac_k0eDY",
		authDomain: "tictactoe4k.firebaseapp.com",
		databaseURL: "https://tictactoe4k-default-rtdb.asia-southeast1.firebasedatabase.app",
		projectId: "tictactoe4k",
		storageBucket: "tictactoe4k.appspot.com",
		messagingSenderId: "361093354841",
		appId: "1:361093354841:web:161da383ada068b0826848",
		measurementId: "G-E41M4JEK99"
		};
		firebase.initializeApp(firebaseConfig)
	</script>
	
	<script src=""></script>

</body>

</html>